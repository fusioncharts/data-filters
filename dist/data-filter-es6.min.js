(function(window, document, undefined) {
"use strict";

class FCDataFilterExt {
  constructor (userconfig) {
    this.multiChart = new MultiCharting();
    this.datastore = this.multiChart.createDataStore();
    /**
    * User configuration format
    * {
    *   blockedCategories: ['Product'],
    *   disabledCategories: ['Product'],
    *   disabledItems: {
    *     'Product' : ['Tea']
    *   },
    *   range: {
    *     year: {min: 2000, max: 2010}
    *   }
    * }
    */
    this.userconfig = userconfig || {};
    // setting demo data
    this.demoData = {
      dataSource: [{
        product: 'tea',
        state: 'bengal',
        sale: '45',
        year: 1990
      },
      {
        product: 'coffee',
        sale: '90',
        state: 'orissa',
        year: 2016
      }]
    };
    this.datastore.setData(this.demoData);
    this.displayConfig = this.createMenuConfigFromData();
    // data set
  }

  generateBlockList (_list) {
    var list = _list || [],
      i = 0,
      ii = list.length,
      key,
      includeAll = false,
      blockList = [],
      item = {},
      itemListArr = [],
      j = 0,
      jj = 0,
      min = 0,
      max = 0,
      subItem = {};
    for (i = 0; i < ii; ++i) {
      item = list[i];
      includeAll = false;
      // if config was disabled or not visible; skip
      if (item.disabled || !item.visible) {
        continue;
      }
      if (!item.checked) {
        includeAll = true;
      }
      // Operation for type string
      if (item.type === 'string') {
        for (j = 0, jj = item.items.length; j < jj; ++j) {
          subItem = item.items[j];
          if (!subItem.disabled && (includeAll || !subItem.checked)) {
            if (blockList.indexOf(item.category + subItem.value) === -1) {
              blockList.push(item.category + subItem.value);
            } // end if
          } // end if
        } // end for j
      } // end if
      // operation for type number
      if (item.type === 'number') {
        for (j = 0, jj = item.items.length; j < jj; ++j) {
          subItem = item.items[j];
          min = item.range[0];
          max = item.range[1];
          if (includeAll || subItem.value < min || subItem.value > max) {
            if (blockList.indexOf(item.category + subItem.value) === -1) {
              blockList.push(item.category + subItem.value);
            } // end if
          } // end if
        } // end for j
      } // end if
    } // end for i
    console.log(blockList);
    return blockList;
  } // end function

  /**
  * function that will be called after
  * apply has been clicked in ui
  */
  apply (config) {
    var dataprocessor = this.multiChart.createDataProcessor();
    console.log(this.datastore.getData(this.createFilter(config)));
  }

  createFilter (_config) {
    var config = _config || this.displayConfig,
      blockList = this.generateBlockList(config);
    return function (object, index, array) {
      var key;
      for (key in object) {
        if (blockList.indexOf(key + object[key]) !== -1) {
          delete object[key];
        }
      }
      return object;
    };
  }

  /**
  * Create config menu according to which
  * view will be rendered.
  */
  createMenuConfigFromData () {
    var config = [],
      datastore = this.datastore,
      key = '',
      temp = {},
      tempArr = {},
      type = '',
      keysArr = datastore.getKeys(),
      i = 0,
      ii = 0;
    if (!datastore) {
      return;
    }
    // Iterating over unique keys
    for (i = 0, ii = keysArr.length; i < ii; ++i) {
      key = keysArr[i];
      temp = {
        category: key,
        disabled: false,
        checked: true,
        visible: true,
        enableCheck: false
      };
      this.__createItemsList__(temp);
      this.__applyUserConfig__(temp);
      config.push(temp);
    }
    return config;
  }

  __createItemsList__ (object) {
    var datastore = this.datastore,
      category = object.category,
      valuesArr = datastore.getUniqueValues(category),
      type = this.__getType__(valuesArr),
      min = 0,
      max = 0,
      i = 0,
      ii = 0;
    // setting type
    object.type = type;
    if (type === 'string') {
      // string will have items list
      object.items = [];
      for (i = 0, ii = valuesArr.length; i < ii; ++i) {
        object.items.push({
          value: valuesArr[i],
          disabled: false,
          checked: true
        });
      }
    } else if (type === 'number') {
      // numbers will have range and a value list
      object.items = [];
      for (i = 0, ii = valuesArr.length; i < ii; ++i) {
        object.items.push({
          value: valuesArr[i]
        });
      }
      min = Math.min.apply(null, valuesArr);
      max = Math.max.apply(null, valuesArr);
      if (this.userconfig.range && this.userconfig.range[category]) {
        if (this.userconfig.range[category].min && this.userconfig.range[category].min > min) {
          min = this.userconfig.range[category].min;
        }
        if (this.userconfig.range[category].max && this.userconfig.range[category].max < max) {
          max = this.userconfig.range[category].max;
        }
      }
      object.range = [min, max];
    }
  }

  __applyUserConfig__ (object) {
    var userconfig = this.userconfig,
      type = object.type,
      category = object.category,
      blockedCategories = userconfig.blockedCategories,
      disabledCategories = userconfig.disabledCategories,
      disabledItems = userconfig.disabledItems && userconfig.disabledItems[category],
      items = object.items || [],
      i = 0,
      ii = items.length;

    if (Array.isArray(blockedCategories) && blockedCategories.indexOf(category) !== -1) {
      object.visible = false;
    }
    if (Array.isArray(disabledCategories) && disabledCategories.indexOf(category) !== -1) {
      object.disabled = true;
    }

    if (Array.isArray(disabledItems)) {
      for (; i < ii; ++i) {
        if (disabledItems.indexOf(items[i].value) !== -1) {
          object.items[i].disabled = true;
        }
      }
    }
  }

  __getType__ (arr) {
    let i = arr.length,
      type = {
        string: 'string',
        number: 'number'
      };
    while (i--) {
      if (isNaN(+arr[i])) {
        return type.string;
      }
    }
    return type.number;
  }
}
window.FCDataFilterExt = FCDataFilterExt;

class FilterVisual {
}
}(this, document));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJkYXRhLWZpbHRlci1lczYubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBGQ0RhdGFGaWx0ZXJFeHQge1xuICBjb25zdHJ1Y3RvciAodXNlcmNvbmZpZykge1xuICAgIHRoaXMubXVsdGlDaGFydCA9IG5ldyBNdWx0aUNoYXJ0aW5nKCk7XG4gICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLm11bHRpQ2hhcnQuY3JlYXRlRGF0YVN0b3JlKCk7XG4gICAgLyoqXG4gICAgKiBVc2VyIGNvbmZpZ3VyYXRpb24gZm9ybWF0XG4gICAgKiB7XG4gICAgKiAgIGJsb2NrZWRDYXRlZ29yaWVzOiBbJ1Byb2R1Y3QnXSxcbiAgICAqICAgZGlzYWJsZWRDYXRlZ29yaWVzOiBbJ1Byb2R1Y3QnXSxcbiAgICAqICAgZGlzYWJsZWRJdGVtczoge1xuICAgICogICAgICdQcm9kdWN0JyA6IFsnVGVhJ11cbiAgICAqICAgfSxcbiAgICAqICAgcmFuZ2U6IHtcbiAgICAqICAgICB5ZWFyOiB7bWluOiAyMDAwLCBtYXg6IDIwMTB9XG4gICAgKiAgIH1cbiAgICAqIH1cbiAgICAqL1xuICAgIHRoaXMudXNlcmNvbmZpZyA9IHVzZXJjb25maWcgfHwge307XG4gICAgLy8gc2V0dGluZyBkZW1vIGRhdGFcbiAgICB0aGlzLmRlbW9EYXRhID0ge1xuICAgICAgZGF0YVNvdXJjZTogW3tcbiAgICAgICAgcHJvZHVjdDogJ3RlYScsXG4gICAgICAgIHN0YXRlOiAnYmVuZ2FsJyxcbiAgICAgICAgc2FsZTogJzQ1JyxcbiAgICAgICAgeWVhcjogMTk5MFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcHJvZHVjdDogJ2NvZmZlZScsXG4gICAgICAgIHNhbGU6ICc5MCcsXG4gICAgICAgIHN0YXRlOiAnb3Jpc3NhJyxcbiAgICAgICAgeWVhcjogMjAxNlxuICAgICAgfV1cbiAgICB9O1xuICAgIHRoaXMuZGF0YXN0b3JlLnNldERhdGEodGhpcy5kZW1vRGF0YSk7XG4gICAgdGhpcy5kaXNwbGF5Q29uZmlnID0gdGhpcy5jcmVhdGVNZW51Q29uZmlnRnJvbURhdGEoKTtcbiAgICAvLyBkYXRhIHNldFxuICB9XG5cbiAgZ2VuZXJhdGVCbG9ja0xpc3QgKF9saXN0KSB7XG4gICAgdmFyIGxpc3QgPSBfbGlzdCB8fCBbXSxcbiAgICAgIGkgPSAwLFxuICAgICAgaWkgPSBsaXN0Lmxlbmd0aCxcbiAgICAgIGtleSxcbiAgICAgIGluY2x1ZGVBbGwgPSBmYWxzZSxcbiAgICAgIGJsb2NrTGlzdCA9IFtdLFxuICAgICAgaXRlbSA9IHt9LFxuICAgICAgaXRlbUxpc3RBcnIgPSBbXSxcbiAgICAgIGogPSAwLFxuICAgICAgamogPSAwLFxuICAgICAgbWluID0gMCxcbiAgICAgIG1heCA9IDAsXG4gICAgICBzdWJJdGVtID0ge307XG4gICAgZm9yIChpID0gMDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGl0ZW0gPSBsaXN0W2ldO1xuICAgICAgaW5jbHVkZUFsbCA9IGZhbHNlO1xuICAgICAgLy8gaWYgY29uZmlnIHdhcyBkaXNhYmxlZCBvciBub3QgdmlzaWJsZTsgc2tpcFxuICAgICAgaWYgKGl0ZW0uZGlzYWJsZWQgfHwgIWl0ZW0udmlzaWJsZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICghaXRlbS5jaGVja2VkKSB7XG4gICAgICAgIGluY2x1ZGVBbGwgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gT3BlcmF0aW9uIGZvciB0eXBlIHN0cmluZ1xuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBpdGVtLml0ZW1zLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBzdWJJdGVtID0gaXRlbS5pdGVtc1tqXTtcbiAgICAgICAgICBpZiAoIXN1Ykl0ZW0uZGlzYWJsZWQgJiYgKGluY2x1ZGVBbGwgfHwgIXN1Ykl0ZW0uY2hlY2tlZCkpIHtcbiAgICAgICAgICAgIGlmIChibG9ja0xpc3QuaW5kZXhPZihpdGVtLmNhdGVnb3J5ICsgc3ViSXRlbS52YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgIGJsb2NrTGlzdC5wdXNoKGl0ZW0uY2F0ZWdvcnkgKyBzdWJJdGVtLnZhbHVlKTtcbiAgICAgICAgICAgIH0gLy8gZW5kIGlmXG4gICAgICAgICAgfSAvLyBlbmQgaWZcbiAgICAgICAgfSAvLyBlbmQgZm9yIGpcbiAgICAgIH0gLy8gZW5kIGlmXG4gICAgICAvLyBvcGVyYXRpb24gZm9yIHR5cGUgbnVtYmVyXG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGl0ZW0uaXRlbXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIHN1Ykl0ZW0gPSBpdGVtLml0ZW1zW2pdO1xuICAgICAgICAgIG1pbiA9IGl0ZW0ucmFuZ2VbMF07XG4gICAgICAgICAgbWF4ID0gaXRlbS5yYW5nZVsxXTtcbiAgICAgICAgICBpZiAoaW5jbHVkZUFsbCB8fCBzdWJJdGVtLnZhbHVlIDwgbWluIHx8IHN1Ykl0ZW0udmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgIGlmIChibG9ja0xpc3QuaW5kZXhPZihpdGVtLmNhdGVnb3J5ICsgc3ViSXRlbS52YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgIGJsb2NrTGlzdC5wdXNoKGl0ZW0uY2F0ZWdvcnkgKyBzdWJJdGVtLnZhbHVlKTtcbiAgICAgICAgICAgIH0gLy8gZW5kIGlmXG4gICAgICAgICAgfSAvLyBlbmQgaWZcbiAgICAgICAgfSAvLyBlbmQgZm9yIGpcbiAgICAgIH0gLy8gZW5kIGlmXG4gICAgfSAvLyBlbmQgZm9yIGlcbiAgICBjb25zb2xlLmxvZyhibG9ja0xpc3QpO1xuICAgIHJldHVybiBibG9ja0xpc3Q7XG4gIH0gLy8gZW5kIGZ1bmN0aW9uXG5cbiAgLyoqXG4gICogZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlclxuICAqIGFwcGx5IGhhcyBiZWVuIGNsaWNrZWQgaW4gdWlcbiAgKi9cbiAgYXBwbHkgKGNvbmZpZykge1xuICAgIHZhciBkYXRhcHJvY2Vzc29yID0gdGhpcy5tdWx0aUNoYXJ0LmNyZWF0ZURhdGFQcm9jZXNzb3IoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFzdG9yZS5nZXREYXRhKHRoaXMuY3JlYXRlRmlsdGVyKGNvbmZpZykpKTtcbiAgfVxuXG4gIGNyZWF0ZUZpbHRlciAoX2NvbmZpZykge1xuICAgIHZhciBjb25maWcgPSBfY29uZmlnIHx8IHRoaXMuZGlzcGxheUNvbmZpZyxcbiAgICAgIGJsb2NrTGlzdCA9IHRoaXMuZ2VuZXJhdGVCbG9ja0xpc3QoY29uZmlnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9iamVjdCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICB2YXIga2V5O1xuICAgICAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGlmIChibG9ja0xpc3QuaW5kZXhPZihrZXkgKyBvYmplY3Rba2V5XSkgIT09IC0xKSB7XG4gICAgICAgICAgZGVsZXRlIG9iamVjdFtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgKiBDcmVhdGUgY29uZmlnIG1lbnUgYWNjb3JkaW5nIHRvIHdoaWNoXG4gICogdmlldyB3aWxsIGJlIHJlbmRlcmVkLlxuICAqL1xuICBjcmVhdGVNZW51Q29uZmlnRnJvbURhdGEgKCkge1xuICAgIHZhciBjb25maWcgPSBbXSxcbiAgICAgIGRhdGFzdG9yZSA9IHRoaXMuZGF0YXN0b3JlLFxuICAgICAga2V5ID0gJycsXG4gICAgICB0ZW1wID0ge30sXG4gICAgICB0ZW1wQXJyID0ge30sXG4gICAgICB0eXBlID0gJycsXG4gICAgICBrZXlzQXJyID0gZGF0YXN0b3JlLmdldEtleXMoKSxcbiAgICAgIGkgPSAwLFxuICAgICAgaWkgPSAwO1xuICAgIGlmICghZGF0YXN0b3JlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEl0ZXJhdGluZyBvdmVyIHVuaXF1ZSBrZXlzXG4gICAgZm9yIChpID0gMCwgaWkgPSBrZXlzQXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGtleSA9IGtleXNBcnJbaV07XG4gICAgICB0ZW1wID0ge1xuICAgICAgICBjYXRlZ29yeToga2V5LFxuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIGNoZWNrZWQ6IHRydWUsXG4gICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgIGVuYWJsZUNoZWNrOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIHRoaXMuX19jcmVhdGVJdGVtc0xpc3RfXyh0ZW1wKTtcbiAgICAgIHRoaXMuX19hcHBseVVzZXJDb25maWdfXyh0ZW1wKTtcbiAgICAgIGNvbmZpZy5wdXNoKHRlbXApO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG5cbiAgX19jcmVhdGVJdGVtc0xpc3RfXyAob2JqZWN0KSB7XG4gICAgdmFyIGRhdGFzdG9yZSA9IHRoaXMuZGF0YXN0b3JlLFxuICAgICAgY2F0ZWdvcnkgPSBvYmplY3QuY2F0ZWdvcnksXG4gICAgICB2YWx1ZXNBcnIgPSBkYXRhc3RvcmUuZ2V0VW5pcXVlVmFsdWVzKGNhdGVnb3J5KSxcbiAgICAgIHR5cGUgPSB0aGlzLl9fZ2V0VHlwZV9fKHZhbHVlc0FyciksXG4gICAgICBtaW4gPSAwLFxuICAgICAgbWF4ID0gMCxcbiAgICAgIGkgPSAwLFxuICAgICAgaWkgPSAwO1xuICAgIC8vIHNldHRpbmcgdHlwZVxuICAgIG9iamVjdC50eXBlID0gdHlwZTtcbiAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIHN0cmluZyB3aWxsIGhhdmUgaXRlbXMgbGlzdFxuICAgICAgb2JqZWN0Lml0ZW1zID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IHZhbHVlc0Fyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIG9iamVjdC5pdGVtcy5wdXNoKHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWVzQXJyW2ldLFxuICAgICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgICBjaGVja2VkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIC8vIG51bWJlcnMgd2lsbCBoYXZlIHJhbmdlIGFuZCBhIHZhbHVlIGxpc3RcbiAgICAgIG9iamVjdC5pdGVtcyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSB2YWx1ZXNBcnIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBvYmplY3QuaXRlbXMucHVzaCh7XG4gICAgICAgICAgdmFsdWU6IHZhbHVlc0FycltpXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIG1pbiA9IE1hdGgubWluLmFwcGx5KG51bGwsIHZhbHVlc0Fycik7XG4gICAgICBtYXggPSBNYXRoLm1heC5hcHBseShudWxsLCB2YWx1ZXNBcnIpO1xuICAgICAgaWYgKHRoaXMudXNlcmNvbmZpZy5yYW5nZSAmJiB0aGlzLnVzZXJjb25maWcucmFuZ2VbY2F0ZWdvcnldKSB7XG4gICAgICAgIGlmICh0aGlzLnVzZXJjb25maWcucmFuZ2VbY2F0ZWdvcnldLm1pbiAmJiB0aGlzLnVzZXJjb25maWcucmFuZ2VbY2F0ZWdvcnldLm1pbiA+IG1pbikge1xuICAgICAgICAgIG1pbiA9IHRoaXMudXNlcmNvbmZpZy5yYW5nZVtjYXRlZ29yeV0ubWluO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVzZXJjb25maWcucmFuZ2VbY2F0ZWdvcnldLm1heCAmJiB0aGlzLnVzZXJjb25maWcucmFuZ2VbY2F0ZWdvcnldLm1heCA8IG1heCkge1xuICAgICAgICAgIG1heCA9IHRoaXMudXNlcmNvbmZpZy5yYW5nZVtjYXRlZ29yeV0ubWF4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvYmplY3QucmFuZ2UgPSBbbWluLCBtYXhdO1xuICAgIH1cbiAgfVxuXG4gIF9fYXBwbHlVc2VyQ29uZmlnX18gKG9iamVjdCkge1xuICAgIHZhciB1c2VyY29uZmlnID0gdGhpcy51c2VyY29uZmlnLFxuICAgICAgdHlwZSA9IG9iamVjdC50eXBlLFxuICAgICAgY2F0ZWdvcnkgPSBvYmplY3QuY2F0ZWdvcnksXG4gICAgICBibG9ja2VkQ2F0ZWdvcmllcyA9IHVzZXJjb25maWcuYmxvY2tlZENhdGVnb3JpZXMsXG4gICAgICBkaXNhYmxlZENhdGVnb3JpZXMgPSB1c2VyY29uZmlnLmRpc2FibGVkQ2F0ZWdvcmllcyxcbiAgICAgIGRpc2FibGVkSXRlbXMgPSB1c2VyY29uZmlnLmRpc2FibGVkSXRlbXMgJiYgdXNlcmNvbmZpZy5kaXNhYmxlZEl0ZW1zW2NhdGVnb3J5XSxcbiAgICAgIGl0ZW1zID0gb2JqZWN0Lml0ZW1zIHx8IFtdLFxuICAgICAgaSA9IDAsXG4gICAgICBpaSA9IGl0ZW1zLmxlbmd0aDtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGJsb2NrZWRDYXRlZ29yaWVzKSAmJiBibG9ja2VkQ2F0ZWdvcmllcy5pbmRleE9mKGNhdGVnb3J5KSAhPT0gLTEpIHtcbiAgICAgIG9iamVjdC52aXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRpc2FibGVkQ2F0ZWdvcmllcykgJiYgZGlzYWJsZWRDYXRlZ29yaWVzLmluZGV4T2YoY2F0ZWdvcnkpICE9PSAtMSkge1xuICAgICAgb2JqZWN0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkaXNhYmxlZEl0ZW1zKSkge1xuICAgICAgZm9yICg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZEl0ZW1zLmluZGV4T2YoaXRlbXNbaV0udmFsdWUpICE9PSAtMSkge1xuICAgICAgICAgIG9iamVjdC5pdGVtc1tpXS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfX2dldFR5cGVfXyAoYXJyKSB7XG4gICAgbGV0IGkgPSBhcnIubGVuZ3RoLFxuICAgICAgdHlwZSA9IHtcbiAgICAgICAgc3RyaW5nOiAnc3RyaW5nJyxcbiAgICAgICAgbnVtYmVyOiAnbnVtYmVyJ1xuICAgICAgfTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoaXNOYU4oK2FycltpXSkpIHtcbiAgICAgICAgcmV0dXJuIHR5cGUuc3RyaW5nO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHlwZS5udW1iZXI7XG4gIH1cbn1cbndpbmRvdy5GQ0RhdGFGaWx0ZXJFeHQgPSBGQ0RhdGFGaWx0ZXJFeHQ7XG5cbmNsYXNzIEZpbHRlclZpc3VhbCB7XG59XG59KHRoaXMsIGRvY3VtZW50KSk7XG4iXSwiZmlsZSI6ImRhdGEtZmlsdGVyLWVzNi5taW4uanMifQ==
